---
import { cn } from '@/lib/utils';

const navItems = [
  { label: '홈', href: '/' },
  { label: '포스트', href: '/posts' },
  { label: '태그', href: '/tags' },
  { label: '소개', href: '/about' },
];

const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="container mx-auto flex h-16 items-center px-4">
    <!-- 로고 -->
    <a href="/" class="mr-6 flex items-center space-x-2">
      <span class="text-xl font-bold">Tech Blog</span>
    </a>
    
    <!-- 네비게이션 -->
    <nav class="flex flex-1 items-center justify-between">
      <ul class="flex items-center space-x-6">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class={cn(
                "text-sm font-medium transition-colors hover:text-primary",
                currentPath === item.href
                  ? "text-foreground"
                  : "text-muted-foreground"
              )}
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>
      
      <!-- 검색 버튼 -->
      <button
        id="search-button"
        class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3"
        aria-label="검색"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="mr-2"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span class="hidden sm:inline">검색</span>
        <kbd class="pointer-events-none ml-2 hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex">
          <span class="text-xs">⌘</span>K
        </kbd>
      </button>
    </nav>
  </div>
</header>

<script>
  // 검색 기능 (추후 구현)
  const searchButton = document.getElementById('search-button');
  
  searchButton?.addEventListener('click', () => {
    console.log('Search clicked');
    // TODO: 검색 모달 열기
  });
  
  // 키보드 단축키
  document.addEventListener('keydown', (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      searchButton?.click();
    }
  });
</script>